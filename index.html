<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>프리스레드</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
</head>
<body>
  <div class="bg-texture"></div>
  <div id="app">
    <!-- Page: Landing (Adult Verification Gate) -->
    <div id="page-landing" class="page">
      <div class="landing-container">
        <div class="landing-brand">프리스레드</div>
        <div class="landing-hero">
          <div class="landing-shield">🛡️</div>
          <h2 class="landing-headline">개인정보 저장 <span class="text-green">ZERO</span></h2>
          <p class="landing-sub">성인인증 후에도 어떤 개인정보도 서버에 저장하지 않습니다</p>
        </div>
        <div class="trust-indicators">
          <div class="trust-item">
            <div class="trust-icon">🚫</div>
            <div class="trust-label">이름/전화번호<br>미저장</div>
          </div>
          <div class="trust-item">
            <div class="trust-icon">👤</div>
            <div class="trust-label">완전 익명<br>활동 보장</div>
          </div>
          <div class="trust-item">
            <div class="trust-icon">🗑️</div>
            <div class="trust-label">서버 로그<br>ZERO</div>
          </div>
        </div>
        <button class="btn-verify-cta" id="btn-verify-cta">성인인증 후 입장하기</button>
        <button class="btn-verify-cta" id="btn-dev-enter" style="background:#444;color:#ccc;box-shadow:none;margin-top:10px;font-size:13px;">테스트 입장 (개발용)</button>
        <p class="landing-footer-text">PASS 본인인증으로 만 19세 이상만 입장할 수 있습니다</p>
      </div>
    </div>

    <!-- Page: Thread List -->
    <div id="page-list" class="page hidden">
      <header class="site-header">
        <h1>프리스레드</h1>
        <div class="search-bar">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
          </svg>
          <input type="text" id="search-input" class="search-input" placeholder="스레드 검색..." maxlength="100" />
          <button class="btn-search-clear hidden" id="btn-search-clear">&times;</button>
        </div>
      </header>

      <main class="board-container">
        <!-- Notice Section -->
        <section class="notice-section">
          <h2 class="notice-title">#취급주의</h2>
          <div class="notice-box">
            <div class="notice-item">
              <span class="notice-icon">ⓘ</span>
              <span class="notice-text">지인 관련 언급, 이름 언급, 도촬, 몰카 ㄴㄴ</span>
              <span class="notice-date">2026.02.09</span>
            </div>
            <div class="notice-item">
              <span class="notice-icon">ⓘ</span>
              <span class="notice-text">이미지 공유는 dropic을 사용해주세요</span>
              <span class="notice-date">2025.12.09</span>
            </div>
            <div class="notice-item">
              <span class="notice-icon">ⓘ</span>
              <span class="notice-text">[필독] 규칙, 문의, 후원 (25-11-17 수정)</span>
              <span class="notice-date">2026.02.12</span>
            </div>
          </div>
        </section>

        <!-- Thread List -->
        <section class="thread-list" id="thread-list">
          <!-- Threads loaded dynamically -->
        </section>
      </main>

      <!-- Write Button -->
      <button class="fab-write" id="btn-write" title="글쓰기">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
      </button>
    </div>

    <!-- Page: Create Thread -->
    <div id="page-create" class="page hidden">
      <header class="sub-header">
        <button class="btn-back" id="btn-back-create">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <h2>새 스레드</h2>
        <button class="btn-submit" id="btn-submit-post">등록</button>
      </header>
      <div class="form-container">
        <input type="text" id="input-title" class="input-title" placeholder="제목을 입력하세요" maxlength="100" />
        <textarea id="input-content" class="input-content" placeholder="내용을 입력하세요"></textarea>

        <!-- Media Attach -->
        <button type="button" class="btn-attach" id="btn-attach-post">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
          </svg>
          <span>자동파괴 미디어 첨부</span>
        </button>
        <div class="media-preview-section hidden" id="post-media-preview">
          <div class="destruct-options">
            <select id="destruct-type">
              <option value="time">시간 후 파괴</option>
              <option value="views">조회 후 파괴</option>
            </select>
            <select id="destruct-time-value">
              <option value="60">1분</option>
              <option value="300">5분</option>
              <option value="1800">30분</option>
              <option value="3600">1시간</option>
              <option value="86400">24시간</option>
            </select>
            <input type="number" id="destruct-views-value" class="hidden" min="1" max="9999" value="5" placeholder="조회수">
          </div>
          <div class="media-thumb" id="post-media-thumb"></div>
          <button type="button" class="btn-remove-media" id="btn-remove-post-media">&times;</button>
        </div>
        <input type="file" id="file-input-post" accept="image/*,video/*,audio/*" hidden>
      </div>
    </div>

    <!-- Page: Thread Detail -->
    <div id="page-detail" class="page hidden">
      <header class="sub-header">
        <button class="btn-back" id="btn-back-detail">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <h2 id="detail-header-title">스레드</h2>
        <div id="detail-actions" style="width:48px;display:flex;justify-content:center;">
          <button class="btn-delete-post hidden" id="btn-delete-post" title="삭제">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
            </svg>
          </button>
        </div>
      </header>
      <div class="detail-container">
        <div class="detail-post">
          <h3 id="detail-title"></h3>
          <p id="detail-content"></p>
          <div id="detail-media-slot"></div>
          <span class="detail-time" id="detail-time"></span>
        </div>
        <div class="detail-comments-header">
          <span>댓글 <span id="detail-comment-count">0</span></span>
        </div>
        <div class="comment-list" id="comment-list">
          <!-- Comments loaded dynamically -->
        </div>
      </div>
      <!-- Comment media preview (above input bar) -->
      <div class="comment-media-preview hidden" id="comment-media-preview">
        <div class="destruct-options-small">
          <select id="comment-destruct-type">
            <option value="time">시간</option>
            <option value="views">조회</option>
          </select>
          <select id="comment-destruct-time-value">
            <option value="60">1분</option>
            <option value="300">5분</option>
            <option value="1800">30분</option>
            <option value="3600">1시간</option>
            <option value="86400">24시간</option>
          </select>
          <input type="number" id="comment-destruct-views-value" class="hidden" min="1" max="9999" value="5" placeholder="조회수">
        </div>
        <div class="media-thumb-small" id="comment-media-thumb"></div>
        <button type="button" class="btn-remove-media-small" id="btn-remove-comment-media">&times;</button>
      </div>
      <div class="reply-indicator hidden" id="reply-indicator">
        <div class="reply-indicator-content">
          <svg class="reply-indicator-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 17 4 12 9 7"/><path d="M20 18v-2a4 4 0 00-4-4H4"/>
          </svg>
          <span class="reply-indicator-text" id="reply-indicator-text"></span>
        </div>
        <button class="reply-indicator-close" id="reply-indicator-close">&times;</button>
      </div>
      <div class="comment-input-bar">
        <button class="btn-attach-comment" id="btn-attach-comment" title="미디어 첨부">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
          </svg>
        </button>
        <input type="file" id="file-input-comment" accept="image/*,video/*,audio/*" hidden>
        <input type="text" id="input-comment" class="input-comment" placeholder="댓글을 입력하세요" maxlength="500" />
        <button class="btn-send" id="btn-send-comment">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- PASS Verification Modal -->
    <div id="pass-modal" class="pass-modal hidden">
      <div class="pass-modal-content">
        <div class="pass-modal-header">
          <span class="pass-modal-title">본인인증</span>
          <button class="pass-modal-close" id="pass-modal-close">&times;</button>
        </div>

        <!-- Processing / Result -->
        <div class="pass-step" id="pass-step-processing">
          <div class="pass-processing" id="pass-processing">
            <div class="pass-spinner"></div>
            <p>인증 확인 중...</p>
          </div>
          <div class="pass-result hidden" id="pass-result">
            <div class="pass-success">
              <div class="pass-check">✓</div>
              <p class="pass-result-text" id="pass-result-text">성인인증이 완료되었습니다</p>
            </div>
            <button class="btn-pass-enter" id="btn-pass-enter">게시판 입장</button>
          </div>
          <div class="pass-result hidden" id="pass-fail-result">
            <div class="pass-fail-icon">✕</div>
            <p class="pass-fail-text" id="pass-fail-text">인증에 실패했습니다</p>
            <button class="btn-pass-retry" id="btn-pass-retry">다시 시도</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Protected Media Viewer Modal -->
    <div id="viewer-modal" class="viewer-modal hidden">
      <div class="viewer-header">
        <span id="viewer-info" class="viewer-info"></span>
        <button id="viewer-close" class="viewer-close">&times;</button>
      </div>
      <div class="viewer-body" id="viewer-body">
        <div class="viewer-media" id="viewer-media"></div>
        <div class="viewer-shield"></div>
      </div>
      <div class="viewer-warning">스크린샷 및 녹화 감지 시 콘텐츠가 즉시 숨겨집니다</div>
    </div>
  </div>

  <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
  <script type="module" src="/main.js"></script>
</body>
</html>
